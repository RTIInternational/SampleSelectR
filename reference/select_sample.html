<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sample selection function — select_sample • SampleSelectR</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sample selection function — select_sample"><meta name="description" content="Selects a random sample using a specified method and sample size. Selection can also optionally be stratified and/or include a measure of
size (mos) if a PPS method is used."><meta property="og:description" content="Selects a random sample using a specified method and sample size. Selection can also optionally be stratified and/or include a measure of
size (mos) if a PPS method is used."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SampleSelectR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RTIInternational/SampleSelectR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sample selection function</h1>
      <small class="dont-index">Source: <a href="https://github.com/RTIInternational/SampleSelectR/blob/main/R/select_sample.R" class="external-link"><code>R/select_sample.R</code></a></small>
      <div class="d-none name"><code>select_sample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Selects a random sample using a specified method and sample size. Selection can also optionally be stratified and/or include a measure of
size (mos) if a PPS method is used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">select_sample</span><span class="op">(</span></span>
<span>  <span class="va">frame</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  <span class="va">n</span>,</span>
<span>  outall <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mos <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort_method <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-frame">frame<a class="anchor" aria-label="anchor" href="#arg-frame"></a></dt>
<dd><p>A data frame, data.table, or tibble from which to draw the sample. No default.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>The desired sampling method. Valid options are "srs", "sys_eq", "sys_pps", and "chromy_pps". No default.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>The sample size to draw from the frame. If strata is NULL, must be a positive integer. If strata is not NULL, must be a
data.frame, tibble, or data.table with columns for each stratification variable as the same type and variable names as the frame
plus a column with the sample size (<code>sample_size</code>) which is a positive integer. No default.</p></dd>


<dt id="arg-outall">outall<a class="anchor" aria-label="anchor" href="#arg-outall"></a></dt>
<dd><p>A logical value indicating whether to return the entire frame with a selection indicator or just the sample. Default is FALSE.</p></dd>


<dt id="arg-strata">strata<a class="anchor" aria-label="anchor" href="#arg-strata"></a></dt>
<dd><p>A vector of characters with variable names of strata. Default is NULL.</p></dd>


<dt id="arg-mos">mos<a class="anchor" aria-label="anchor" href="#arg-mos"></a></dt>
<dd><p>A character string defining the variable name on the frame for the measure of size. If not NULL, must have method = c("sys_pps", "chromy_pps").
If NULL, must have method=c("srs", "sys"). Default is NULL.</p></dd>


<dt id="arg-sort-vars">sort_vars<a class="anchor" aria-label="anchor" href="#arg-sort-vars"></a></dt>
<dd><p>A vector of characters indicating the variables that should be used to sort the frame. If not NULL, cannot have method = "srs".
Default is NULL.</p></dd>


<dt id="arg-sort-method">sort_method<a class="anchor" aria-label="anchor" href="#arg-sort-method"></a></dt>
<dd><p>A character string defining the method to implicitly sort the frame. Valid options are "serpentine" and "nest". Must coincide
with sort_var; i.e., both must be NULL or both must be not NULL. Default is NULL.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tidytable object containing the entire frame with a selection indicator or just the sample, dependent on the value of outall.
Selection probability and sampling weight are also included. May include various summary messages to the console when applicable for
certain sampling methods.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># SRS of 100 US counties, using geographic region as strata</span></span></span>
<span class="r-in"><span><span class="co"># n is a data frame containing the strata values and corresponding desired sample size</span></span></span>
<span class="r-in"><span><span class="co"># Sample size column must be titled 'sample_size'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">n_df_srs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Northeast"</span>, <span class="st">"Midwest"</span>, <span class="st">"South"</span>, <span class="st">"West"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">25</span>, <span class="fl">25</span>, <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">county_2023</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">select_sample</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"srs"</span>, n <span class="op">=</span> <span class="va">n_df_srs</span>, strata <span class="op">=</span> <span class="st">"Region"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = South </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 1422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = West </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = Northeast </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = Midwest </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 1055</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tidytable: 100 × 27</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Region GEOID Name    State Division Pop_Tot Pop_Pct_White_NH Pop_Pct_Black_NH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> South  05043 Drew C… AR    West So…   <span style="text-decoration: underline;">17</span>143             64.9           26.7  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> South  05097 Montgo… AR    West So…    <span style="text-decoration: underline;">8</span>571             89.7            0.840</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> South  12011 Browar… FL    South A… 1<span style="text-decoration: underline;">946</span>127             31.9           27.6  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> South  12109 St. Jo… FL    South A…  <span style="text-decoration: underline;">292</span>243             78.6            4.93 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> South  13071 Colqui… GA    South A…   <span style="text-decoration: underline;">45</span>907             54.3           22.8  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> South  13093 Dooly … GA    South A…   <span style="text-decoration: underline;">11</span>026             40.9           47.7  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> South  13127 Glynn … GA    South A…   <span style="text-decoration: underline;">84</span>987             62.1           24.5  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> South  13259 Stewar… GA    South A…    <span style="text-decoration: underline;">4</span>978             24.6           59.7  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> South  13273 Terrel… GA    South A…    <span style="text-decoration: underline;">8</span>941             36.4           59.6  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> South  21131 Leslie… KY    East So…   <span style="text-decoration: underline;">10</span>261             96.8            0.526</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 19 more variables: Pop_Pct_AIAN_NH &lt;dbl&gt;, Pop_Pct_Asian_NH &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_NHPI_NH &lt;dbl&gt;, Pop_Pct_Other_NH &lt;dbl&gt;, Pop_Pct_Hispanic &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   HU_Tot &lt;dbl&gt;, HU_Pct_Occupied &lt;dbl&gt;, HU_Pct_Vacant &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_0004 &lt;dbl&gt;, Pop_Pct_0509 &lt;dbl&gt;, Pop_Pct_1014 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_2544 &lt;dbl&gt;, Pop_Pct_4564 &lt;dbl&gt;, Pop_Pct_6574 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_75plus &lt;dbl&gt;, Pop_Pct_1517 &lt;dbl&gt;, Pop_Pct_1824 &lt;dbl&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Systematic sample of 250 US universities. Each unit has an equal probability of being selected</span></span></span>
<span class="r-in"><span><span class="co"># Includes a nested sort of enrollment total within sector</span></span></span>
<span class="r-in"><span><span class="co"># Returns all obs from original data frame with a selection indicator column</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sample_sys_eq</span> <span class="op">&lt;-</span> <span class="va">ipeds</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">select_sample</span><span class="op">(</span></span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="st">"sys_eq"</span>, n <span class="op">=</span> <span class="fl">250</span>, outall <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    sort_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SECTOR"</span>, <span class="st">"ENRTOT"</span><span class="op">)</span>, sort_method <span class="op">=</span> <span class="st">"nest"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frame size: 5914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample size: 250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sampling interval (k): 23.656</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Random start (r): 10.85918</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For samples taken with outall = TRUE, the sample size can be verified by summing</span></span></span>
<span class="r-in"><span><span class="co"># the SelectionIndicator column.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sample_sys_eq</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tidytable: 5,914 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    UNITID INSTNM      STABBR  FIPS OBEREG ICLEVEL SECTOR LOCALE DEGGRANT HLOFFER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">180</span>203 Aaniiih Na… MT        30 Rocky… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">491</span>297 University… WI        55 Great… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">200</span>086 Nueta Hida… ND        38 Plain… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">219</span>408 Sisseton W… SD        46 Plain… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">260</span>372 Lac Courte… WI        55 Great… Four o… Publi… Rural… Degree-… Master…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">214</span>607 Pennsylvan… PA        42 Mid E… Four o… Publi… Subur… Degree-… Master…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">366</span>340 Stone Chil… MT        30 Rocky… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">200</span>466 Sitting Bu… ND        38 Plain… Four o… Publi… Rural… Degree-… Master…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">434</span>584 Ilisagvik … AK         2 Far W… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">243</span>188 University… PR        72 Other… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5,904 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 9 more variables: ENRTOT &lt;dbl&gt;, EFUG &lt;dbl&gt;, EFUG1ST &lt;dbl&gt;, EFUGFT &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   EFGRAD &lt;dbl&gt;, EFGRADFT &lt;dbl&gt;, SelectionIndicator &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   SelectionProbability &lt;dbl&gt;, SamplingWeight &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">sample_sys_eq</span><span class="op">$</span><span class="va">SelectionIndicator</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 250</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Systematic PPS sample of 250 US universities. Each unit's probability of selection</span></span></span>
<span class="r-in"><span><span class="co"># is proportional to its size measure.</span></span></span>
<span class="r-in"><span><span class="co"># Using enrollment total as MOS</span></span></span>
<span class="r-in"><span><span class="co"># Includes a nested sort of enrollment total within sector</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sample_sys_pps</span> <span class="op">&lt;-</span> <span class="va">ipeds</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">select_sample</span><span class="op">(</span></span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="st">"sys_pps"</span>, n <span class="op">=</span> <span class="fl">250</span>, mos <span class="op">=</span> <span class="st">"ENRTOT"</span>,</span></span>
<span class="r-in"><span>    sort_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SECTOR"</span>, <span class="st">"ENRTOT"</span><span class="op">)</span>, sort_method <span class="op">=</span> <span class="st">"nest"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frame size: 5914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample size: 250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sampling interval (k): 78812</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Random start (r): 10272.68</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For pps samples, it is possible for a single sampling unit to be selected multiple times</span></span></span>
<span class="r-in"><span><span class="co"># due to a large mos value. This is especially true as desired sample size increases. The</span></span></span>
<span class="r-in"><span><span class="co"># result is the final sample may not meet the desired sample size. To verify the pps sample,</span></span></span>
<span class="r-in"><span><span class="co"># the NumberHits column can be summed and should total to the desired sample size.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sample_sys_pps</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tidytable: 247 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    UNITID INSTNM      STABBR  FIPS OBEREG ICLEVEL SECTOR LOCALE DEGGRANT HLOFFER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">214</span>795 Pennsylvan… PA        42 Mid E… Four o… Publi… Rural… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">187</span>596 Navajo Tec… NM        35 South… Four o… Publi… Rural… Degree-… Doctor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">228</span>501 Sul Ross S… TX        48 South… Four o… Publi… Town:… Degree-… Master…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">204</span>705 Ohio State… OH        39 Great… Four o… Publi… Subur… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">163</span>338 University… MD        24 Mid E… Four o… Publi… Town:… Degree-… Doctor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">487</span>010 The Univer… TN        47 South… Four o… Publi… City:… Degree-… Doctor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">219</span>259 Northern S… SD        46 Plain… Four o… Publi… Town:… Degree-… Master…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">218</span>645 University… SC        45 South… Four o… Publi… Subur… Degree-… Master…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">207</span>397 Oklahoma S… OK        40 South… Four o… Publi… City:… Degree-… Bachel…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">155</span>025 Emporia St… KS        20 Plain… Four o… Publi… Town:… Degree-… Doctor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 237 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 9 more variables: ENRTOT &lt;dbl&gt;, EFUG &lt;dbl&gt;, EFUG1ST &lt;dbl&gt;, EFUGFT &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   EFGRAD &lt;dbl&gt;, EFGRADFT &lt;dbl&gt;, SamplingWeight &lt;dbl&gt;, NumberHits &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ExpectedHits &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">sample_sys_pps</span><span class="op">$</span><span class="va">NumberHits</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 250</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sequential aka Chromy's method PPS sample of 500 PUMAs, using geographic region as strata</span></span></span>
<span class="r-in"><span><span class="co"># Includes a serpentine sort of geographic division then state</span></span></span>
<span class="r-in"><span><span class="co"># Using population total as MOS, each unit's probability of selection is proportional to its</span></span></span>
<span class="r-in"><span><span class="co"># size measure.</span></span></span>
<span class="r-in"><span><span class="co"># Note that there may be a discrepancy between the desired and final sample sizes. The final</span></span></span>
<span class="r-in"><span><span class="co"># sample size can be verified by totaling NumberHits.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">n_df_chr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Northeast"</span>, <span class="st">"Midwest"</span>, <span class="st">"South"</span>, <span class="st">"West"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">125</span>, <span class="fl">125</span>, <span class="fl">125</span>, <span class="fl">125</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">puma_2023</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">select_sample</span><span class="op">(</span></span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="st">"chromy_pps"</span>, n <span class="op">=</span> <span class="va">n_df_chr</span>, strata <span class="op">=</span> <span class="st">"Region"</span>, mos <span class="op">=</span> <span class="st">"Pop_Tot"</span>,</span></span>
<span class="r-in"><span>    sort_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Division"</span>, <span class="st">"State"</span><span class="op">)</span>, sort_method <span class="op">=</span> <span class="st">"serpentine"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = South </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 952</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = West </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 581</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = Northeast </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 423</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratum: Region = Midwest </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Frame size: 506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --Sample size: 125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tidytable: 500 × 28</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Region GEOID   Name  State Division Pop_Tot Pop_Pct_White_NH Pop_Pct_Black_NH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> South  1000105 Sout… DE    South A…  <span style="text-decoration: underline;">107</span>205             59.0            23.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> South  1200902 Brev… FL    South A…  <span style="text-decoration: underline;">124</span>268             82.9             2.04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> South  1201106 Brow… FL    South A…  <span style="text-decoration: underline;">186</span>422             29.4            28.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> South  1201113 Brow… FL    South A…  <span style="text-decoration: underline;">125</span>752             26.9            22.6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> South  1201500 Char… FL    South A…  <span style="text-decoration: underline;">195</span>083             82.4             5.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> South  1203104 Duva… FL    South A…  <span style="text-decoration: underline;">120</span>322             45.6            28.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> South  1203107 Duva… FL    South A…  <span style="text-decoration: underline;">131</span>852             64.7             9.97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> South  1205704 Hill… FL    South A…  <span style="text-decoration: underline;">136</span>079             54.3             6.31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> South  1205707 Hill… FL    South A…  <span style="text-decoration: underline;">152</span>043             38.3            18.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> South  1206902 Lake… FL    South A…  <span style="text-decoration: underline;">136</span>281             73.1             9.06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 490 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 20 more variables: Pop_Pct_AIAN_NH &lt;dbl&gt;, Pop_Pct_Asian_NH &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_NHPI_NH &lt;dbl&gt;, Pop_Pct_Other_NH &lt;dbl&gt;, Pop_Pct_Hispanic &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   HU_Tot &lt;dbl&gt;, HU_Pct_Occupied &lt;dbl&gt;, HU_Pct_Vacant &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_0004 &lt;dbl&gt;, Pop_Pct_0509 &lt;dbl&gt;, Pop_Pct_1014 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_2544 &lt;dbl&gt;, Pop_Pct_4564 &lt;dbl&gt;, Pop_Pct_6574 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Pop_Pct_75plus &lt;dbl&gt;, Pop_Pct_1517 &lt;dbl&gt;, Pop_Pct_1824 &lt;dbl&gt;, …</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stephanie Zimmer, John David Bunker, Jr., Thomas Burkett, Philip Lee, Haby Sow, RTI International.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

